---
title: "Практическая работа 002"
author: "trembochev@yandex.ru"
format: 
  md:
    output-file: README.md
---

## Цель работы

1. Развить практические навыки использования языка программирования R для обработки данных
2. Закрепить знания базовых типов данных языка R
3. Развить практические навыки использования функций обработки данных пакета `dplyr` – функции `select(), filter(), mutate(), arrange(), group_by()`

## Исходные данные

1. Программное обеспечение Windows 11
2. Rstudio Desktop
3. Интерпретатор языка R 4.5.2

## Задание

Проанализировать встроенный в пакет dplyr набор данных языка R и ответить на вопросы.

## Ход работы
1. Подключаем библиотеку dplyr
2. Проанализировать встроенный в пакет dplyr набор данных starwars с помощью языка R и ответить на вопросы:
    - Сколько строк в датафрейме?
    - Сколько столбцов в датафрейме?
    - Как просмотреть примерный вид датафрейма?
    - Сколько уникальных рас персонажей (species) представлено в данных?
    - Найти самого высокого персонажа.
    - Найти всех персонажей ниже 170
    - Подсчитать ИМТ (индекс массы тела) для всех персонажей.
    - Найти 10 самых “вытянутых” персонажей. “Вытянутость” оценить по отношению массы (mass) к росту (height) персонажей
    - Найти средний возраст персонажей каждой расы вселенной Звездных войн
    - Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.
    - Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.
2. Оформить отчет в соответствии с шаблоном

### Шаг 1

Подключаем библиотеку dplyr

```{r}
library(dplyr)
```
    
### Шаг 2

#### Сколько строк в датафрейме?

```{r}
starwars %>% nrow()
```

#### Сколько столбцов в датафрейме?


```{r}
starwars %>% ncol()
```

#### Как просмотреть примерный вид датафрейма?

```{r}
starwars %>% glimpse()
```

#### Сколько уникальных рас персонажей (species) представлено в данных?

```{r}
starwars["species"] %>% unique() %>% nrow() 
```

#### Найти самого высокого персонажа.

```{r}
starwars %>% filter(height == max(height, na.rm = TRUE)) %>%
  select(name, height)
```

#### Найти всех персонажей ниже 170
 
```{r}
starwars %>% filter(height < 170) %>% select(name, height)
```

#### Подсчитать ИМТ (индекс массы тела) для всех персонажей.

```{r}
starwars <- starwars %>% mutate(IMT = mass / ( (height / 100) ^ 2 ))
starwars 

```


#### Найти 10 самых “вытянутых” персонажей. “Вытянутость” оценить по отношению массы (mass) к росту (height) персонажей
 
```{r}
starwars %>%
  mutate(stretch = mass / height) %>% arrange(desc(stretch)) %>%
  head(10) %>% select(name, stretch)
```


#### Найти средний возраст персонажей каждой расы вселенной Звездных войн

```{r}
starwars %>%
  filter(!is.na(species), !is.na(birth_year)) %>%
  group_by(species) %>%
  summarise(avg_age = mean(birth_year, na.rm = TRUE)) %>%
  arrange(desc(avg_age)) 
```

#### Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.

```{r}
starwars %>%
  count(eye_color, sort = TRUE) %>% head(1)
```

#### Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.

```{r}
starwars %>%
  mutate(name_length = nchar(name)) %>% group_by(species) %>%
  summarise(avg_name_length = mean(name_length, na.rm = TRUE))
```

### Шаг 2

Отчет оформлен в соответствии с шаблоном

## Оценка результатов

Задача решена с использованием языка программирования R и пакета `dplyr`. Я научился использовать эти два инструмента для анализа данных на более продвинутом уровне.

## Вывод

В данной работе я ответил на вопросы путем анализа и обработки датафрейма `starwars` и развил практические навыки
